# SIMPLE_RESTART CART 0 32 -1 1 -1 1 128 64 64
# INTERP_FROM_RESTART ./result.sles
VERBOSE
DEFINE MY_INTERVAL 1
# equation of state ..

# register a single scalar that blows in ..
REGISTER_SCALAR CT
CT.SC_LAM = 1
CT.SC_T = 1

# also register a residence time scalar
# REGISTER_SCALAR RES_TIME
# INIT RES_TIME 0.0

# set the initial condition
# INIT u=1 0 0 p=0.0
# INIT u=19.0 0 0 p=0.0 CT 0.5
# INIT CT 0.0
INIT time=8.25 step=600

RESTART ./mesh.mles
INTERP_FROM_RESTART ./result.sles

# set the time stepping
TIMESTEP DT 0.01
# TIMESTEP CFL 0.1
NSTEPS 1000
CHECK_INTERVAL 1

RESET_STATS
STATS u p CT

EOS HELMHOLTZ
SGS_MODEL VREMAN 
RHO 1.225
MU 1.789e-5
HELMHOLTZ_SOS 340
# RHO 1.225
# MU (1.0/395.0)
# HELMHOLTZ_SOS 340

# boundary conditions 
# x0 = INLET 1.0 0 0 CT 1.0
# x0 = HOOK NY 100 NZ 100 UREF 7.63 REFD 0.3 \\
#          LAGT_U 0.042424 LAGT_W 0.012727 LAGT_V 0.008484 
# x1 = OUTLET_VV 1.0 0.1 -1.0 0.0 LOCAL_U

# y0 = WM_ALG_WALL
# y1 = WM_ALG_WALL
# y0 = WALL 
# y1 = WALL
y0 WALL CT 100.0
y1 WALL CT 0.0

FLUSH_PROBES 1
PROBE NAME=./output/probes/line INTERVAL=1 GEOM=LINE 0 -1 0 0 1 0 200 VARS=u p CT

# POINTCLOUD_PROBE NAME=./output/pcprobes/up INTERVAL=1 PRECISION=FLOAT FORMAT=ASCII GEOM=FILE PC_line.txt VARS comp(u,0) comp(u,1) comp(u,2) p CT
CONDITIONAL_PROBE NAME=./output/cprobes/uvwp WRITE_INTERVAL=100 SAMPLE_INTERVAL=1 CVAR comp(x_cv,1) VARS comp(u,0) comp(u,1) comp(u,2) p


# show some diagnostics ..
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/images_CT/CT GEOM Z_PLANE_FRAC 0.5 VAR CT RANGE 0 100
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/images_U/U GEOM Z_PLANE_FRAC 0.5 VAR comp(u,0)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/images_V/V GEOM Z_PLANE_FRAC 0.5 VAR comp(u,1)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/images_W/W GEOM Z_PLANE_FRAC 0.5 VAR comp(u,2)

WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal_U/U GEOM X_PLANE_FRAC 0.5 VAR comp(u,0)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal_V/V GEOM X_PLANE_FRAC 0.5 VAR comp(u,1)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal_W/W GEOM X_PLANE_FRAC 0.5 VAR comp(u,2)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal_CT/CT GEOM X_PLANE_FRAC 0.5 VAR CT RANGE 0 100

WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal_U/U GEOM Y_PLANE_FRAC 0.5 VAR comp(u,0)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal_V/V GEOM Y_PLANE_FRAC 0.5 VAR comp(u,1)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal_W/W GEOM Y_PLANE_FRAC 0.5 VAR comp(u,2)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal_CT/CT GEOM Y_PLANE_FRAC 0.5 VAR CT RANGE 0 100

FLUSH_IMAGES 1

# Write result and snapshot files
WRITE_RESULT INTERVAL=100*$(MY_INTERVAL) NAME=output/result/RES
# WRITE_SNAPSHOT NAME=output/snapshot/up INTERVAL=10*$(MY_INTERVAL) VARS u p CT 
WRITE_DATA NAME=output/vtk/up FORMAT=VTK \ 
        GEOM=IN_BOX -1.57 1.57 -1 1 -1.57 1.57\
        INTERVAL=100*$(MY_INTERVAL) VARS u CT 



