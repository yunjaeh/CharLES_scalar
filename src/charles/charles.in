VERBOSE

#DISABLE_FA_GROUPING
RESTART ../stitch/restart.mles #result.sles

#WRITE_SNAPSHOT NAME fwh_ss INTERVAL 1 VARS main.x0:x_bf main.x0:n_bf main.x0:proj(p) main.x1:x_bf main.x1:n_bf main.x1:proj(p)

INTERP_FROM_RESTART result.00000003.sles #RESET
#INTERP_FROM_RESTART ../stitch/restart.root3.mles result.00000100.sles TRANSLATE 1 1 1

DEFINE this_gamma 1.4
DEFINE this_pref (1.0/$(this_gamma))
#INIT STEP 0
#INIT TIME 0.0

#POST
#WRITE_RESULT 1

SGS_MODEL VREMAN
EOS IDEAL_GAS
RHO_REF = 1.0
T_REF   = 1.0
P_REF   = $(this_pref)
GAMMA   = $(this_gamma)
MU_REF  = 1.0

#INIT_FROM_POTENTIAL_FLOW
#INIT_RUP 1.0 1.0 0 0 $(this_pref)
#INIT rho 1.0 u 1.0 0.0 0.0 p $(this_pref)
#INIT_CV_DATA_IN_GEOM GEOM BOX -0.5 0.5 -0.5 0.5 -0.5 0.5 INIT rho 0.8 INIT p 0.8*$(this_pref)
#INIT_CV_DATA_IN_GEOM GEOM SBIN ../surfer/sphere.sbin INIT rho 0.6 INIT p 0.6*$(this_pref)

WRITE_SNAPSHOT NAME snapshots/rho INTERVAL 1 VARS rho 
WRITE_RESULT 1
#WRITE_SLES 1
TIMESTEP DT 1.0E-8
CHECK_INTERVAL 2
NSTEPS 3

STATS u p p+0.5*dot(u,u) mach()
RESET_STATS 

#QUERY_BC y0 INTERVAL 1 
#QUERY_BC y1 INTERVAL 1 WRITE

# bcs
main.x0 CBC_RUP 1.0 1.0 0 0 $(this_pref)
main.x1 NSCBC_OUTLET_PRESSURE P_REF (0.5*$(this_pref)) 
main.y0 WALL_ADIABATIC
main.y1 WALL_ADIABATIC
main.z0 WALL_ADIABATIC
main.z1 WM_ALG_ADIABATIC

#PDF_PROBE NAME probes/T SAMPLE_INTERVAL=1 WRITE_INTERVAL=1 RESET_AFTER_WRITE NBIN 20 VAR=T
#WRITE_IMAGE INTERVAL 10 NAME test GEOM Z_PLANE_FRAC 0.5 SIZE 1000 1000 VAR mach()_avg/2
#VOLUMETRIC_PROBE NAME probes/x INTERVAL 1 GEOM SPHERE 0.5 0.5 0.5 0.5 VARS comp(x_cv,0)

#WRITE_DATA INTERVAL 100 NAME x1 FORMAT=TECPLOT GEOM=FAZONE x1 VARS *:area_bf *:x_bf
#CONDITIONAL_PROBE NAME c1probes/y SAMPLE_INTERVAL 1 WRITE_INTERVAL 1 RESET_AFTER_WRITE CVAR main.y0:proj(comp(x_cv,0)) NBIN 500 RESET_AFTER_WRITE VARS main.y0:proj(comp(x_cv,2))
#CONDITIONAL_PROBE NAME cprobe/wall_stats WRITE_INTERVAL 500 SAMPLE_INTERVAL 5 CVAR y0:proj(comp(x_cv,0)) NBIN 500 RESET_AFTER_WRITE VARS y0:tau_wall() y0:y_plus()

#PROBE NAME probes/z1 GEOM SURFACE_POINT 0 0 1 INTERVAL 1 VARS p
#PROBE NAME zm1 GEOM SURFACE_POINT 0 0 -1 INTERVAL 2 VARS p
#PROBE NAME y1 GEOM SURFACE_POINT 0 1 0 INTERVAL 3 VARS p
#PROBE NAME ym1 GEOM SURFACE_POINT 0 -1 0 INTERVAL 4 VARS p
#PROBE NAME z1 GEOM SURFACE_POINT 1 0 0 INTERVAL 5 VARS p
#PROBE NAME zm1 GEOM SURFACE_POINT -1 0 0 INTERVAL 6 VARS p
#PROBE NAME slice_test INTERVAL 1 GEOM SURFACE_SLICE 0 0 0 1 0 0 FAZONE y1 z1 VARS p
#PROBE NAME slice_test2 INTERVAL 1 GEOM SURFACE_SLICE 0 0 0 1 0 0 VARS p

# example flux probe syntax 
#FLUX_PROBE NAME test_fp XP 0.5 0 0 NP 1 0 0 INTERVAL 2 VARS mass_flux() 
#MULTIFLUX_PROBE NAME test_mfp XP 0.5 0 0 NP 1 0 0 FORMAT MULTI_FILE INTERVAL 2 VARS mass_flux() 
#FLUX_PROBE NAME probes/test_fp XP 0.5 0 0 NP 1 0 0 INTERVAL 1 VARS mass_flux() sn_prod(p,1,0,0) comp(tau_fa(),0) comp(tau_fa(),1) comp(tau_fa(),2) # mass_flux(Z) mass_flux(chemtable:Y_CO())
#
#STATS mag(u) u p T blah mag(blah) exp(mag(blah))
#WRITE_DATA INTERVAL 100 NAME x0x1 FORMAT=PVTK GEOM=FAZONE x0 x1 VARS x_cv vol_cv
#WRITE_DATA INTERVAL 100 NAME test1 FORMAT=ENSIGHT GEOM=ALL VARS rho u mag(u) # TAKES ALL ZONES
#WRITE_DATA INTERVAL 100 NAME test2 FORMAT=ENSIGHT GEOM=ALL_WITH_ZONES VARS rho u mag(u) 
#WRITE_DATA INTERVAL 100 NAME test3 FORMAT=ENSIGHT GEOM=PLANE_X 0.5 VARS rho u mag(u) rho*u
#WRITE_DATA INTERVAL 100 NAME test4 FORMAT=ENSIGHT GEOM=FAZONE main.x0 main.x1 main.y0 main.y1 main.z0 main.z1 VARS p T
#WRITE_DATA INTERVAL 100 NAME test_zone_vtk FORMAT=VTK GEOM=FAZONE y0 y1 z0 z1 VARS rho u *:area_bf *:n_bf *:tau_wall()

#WRITE_IMAGE INTERVAL 2 NAME test1 TARGET 0 0 0 CAMERA 2 2 2 UP 0 0 1 SIZE 1000 1000 VAR_ON_SURFACE x0:area_bf MESH_ON_SURFACE
#WRITE_IMAGE INTERVAL 2 NAME test2 TARGET 0 0 0 CAMERA 2 2 2 UP 0 0 1 SIZE 1000 1000 VAR_ON_SURFACE *:area_bf MESH_ON_SURFACE
#WRITE_IMAGE INTERVAL 2 NAME test3 TARGET 0 0 0 CAMERA 2 2 2 UP 0 0 1 SIZE 1000 1000 VAR_ON_SURFACE vol_cv MESH_ON_SURFACE
#POINTCLOUD_PROBE NAME=test INTERVAL 1 PRECISION DOUBLE GEOM FILE points.txt VARS mag(u)
#
#WRITE_IMAGE INTERVAL 1 NAME test3 TARGET 0 0 0 CAMERA 2 2 2 UP 0 0 1 SIZE 1000 1000 GEOM ISO mag(x_no) 1 VAR mag(u) HIDE_ZONES ALL
#WRITE_IMAGE INTERVAL 1 NAME test4 TARGET 0 0 0 CAMERA 2 2 2 UP 0 0 1 SIZE 1000 1000 GEOM ISO mag(x_no) 1 VAR_ON_ISO mag(u) HIDE_ZONES ALL

#WRITE_FORCE INTERVAL 1 NAME forces BFZONE main.x0,main.x1,main.y0,main.y1,main.z0,main.z1 MOMENT 0 0 0
#FWH_SURFACE NAME fwh_surf_0 GEOM BOX 0.25 0.5 0.25 0.5 0.25 0.5 INTERVAL 1 

FLUSH_IMAGES 1 # buffered images b/w flushes
FLUSH_PROBES 1 # steps b/w flushes
#FLUSH_FWH 1
