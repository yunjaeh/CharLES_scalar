# Makefile.cascade
# makefile for the cluster in cascade

# Archiving commands to create, index, and extract
AR = 		ar rv
RANLIB = 	ar -ts
EXTRACT =	ar -x

# compiler
CXX=		mpicxx
CXXFLAGS=	-O0 -g

# verbosity level
CXXFLAGS += 	-DCTI_VERBOSE3 -DWITH_SHM
CXXFLAGS +=	-Wno-write-strings

# parmetis, uncomment and edit the following
# if you need parmetis support

PNG_ROOT =/opt/ohpc/pub/libs/libpng/gnu/1.6.27
PNG_INC = -I/opt/ohpc/pub/libs/libpng/gnu/1.6.27/include/
PNG_LIB = -L/opt/ohpc/pub/libs/libpng/gnu/1.6.27/lib/ -lpng -lz

TRILINOS_INC= -I/opt/ohpc/pub/libs/libtrilinos/include/
TRILINOS_LIB=-L/opt/ohpc/pub/libs/libtrilinos/lib -lml -laztecoo -lamesos -lifpack -lzoltan  -lepetra -lepetraext -lteuchos -ltriutils /lib64/liblapack.so.3.4.2
LAPACK_LIB =-L/opt/ohpc/pub/libs/lapack/lib64/ -llapack
BLAS_LIB =-L/opt/ohpc/pub/libs/lapack/lib64/ -lblas


 CLIBS += -lrt
# for serial tools 
CXX_NO_MPI=g++ -O3

CXXFLAGS += $(TRILINOS_INC) $(PNG_INC) -DWITH_PNG -DPNG_INTERNAL -DWITH_TRILINOS
CLIBS +=  $(PNG_LIB) $(TRILINOS_LIB) $(LAPACK_LIB) $(BLAS_LIB)

# for no mpi mode
ifeq "$(mpi)$" "0"
     CXXFLAGS+=-DNO_MPI
         CXX = $(CXX_NO_MPI)
endif

