# SIMPLE_RESTART CART 0 32 -1 1 -1 1 128 64 64
# INTERP_FROM_RESTART ./result.sles
VERBOSE
DEFINE MY_INTERVAL 5
# equation of state ..

# register a single scalar that blows in ..
REGISTER_SCALAR T
T.SC_LAM = 1/0.71
T.SC_T = 1/0.71

# also register a residence time scalar
# REGISTER_SCALAR RES_TIME
# INIT RES_TIME 0.0

# set the initial condition
# INIT u=1 0 0 p=0.0
# INIT u=19.0 0 0 p=0.0 CT 0.5
# INIT CT 0.0
INIT time=0 step=0

RESTART ./mesh.mles
# INTERP_FROM_RESTART ./result.sles

# set the time stepping
TIMESTEP DT 0.02
# TIMESTEP CFL 0.01
NSTEPS 5000
CHECK_INTERVAL 1

RESET_STATS
STATS u p T

EOS HELMHOLTZ
SGS_MODEL VREMAN 
# RHO 1.225
# MU 1.789e-5
# HELMHOLTZ_SOS 340
RHO 1.0
MU 1.0e-3 * sqrt(0.71)
HELMHOLTZ_SOS 340

# boundary conditions 
# x0 = INLET 1.0 0 0 CT 1.0
# x0 = HOOK NY 100 NZ 100 UREF 7.63 REFD 0.3 \\
#          LAGT_U 0.042424 LAGT_W 0.012727 LAGT_V 0.008484 
# x1 = OUTLET_VV 1.0 0.1 -1.0 0.0 LOCAL_U

x0 WALL T 100.0
x1 WALL T 0.0
y0 WALL
y1 WALL

FLUSH_PROBES 1
PROBE NAME=./output/probes/line INTERVAL=1 GEOM=LINE 0 -1 0 0 1 0 200 VARS=u p T


# show some diagnostics ..
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/vertical/T GEOM Z_PLANE_FRAC 0.5 VAR T
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/vertical_vel/U GEOM Z_PLANE_FRAC 0.5 VAR comp(u,0)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/vertical_vel/V GEOM Z_PLANE_FRAC 0.5 VAR comp(u,1)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/vertical_vel/W GEOM Z_PLANE_FRAC 0.5 VAR comp(u,2)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/vertical_vel/mag GEOM Z_PLANE_FRAC 0.5 VAR mag(u)

WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal/U GEOM X_PLANE_FRAC 0.5 VAR comp(u,0)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal/V GEOM X_PLANE_FRAC 0.5 VAR comp(u,1)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal/W GEOM X_PLANE_FRAC 0.5 VAR comp(u,2)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal/mag GEOM X_PLANE_FRAC 0.5 VAR mag(u)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/normal/T GEOM X_PLANE_FRAC 0.5 VAR T 

WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal/U GEOM Y_PLANE_FRAC 0.5 VAR comp(u,0)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal/V GEOM Y_PLANE_FRAC 0.5 VAR comp(u,1)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal/W GEOM Y_PLANE_FRAC 0.5 VAR comp(u,2)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal/mag GEOM Y_PLANE_FRAC 0.5 VAR mag(u)
WRITE_IMAGE INTERVAL $(MY_INTERVAL) NAME output/horizontal/T GEOM Y_PLANE_FRAC 0.5 VAR T 

FLUSH_IMAGES 1

# Write result and snapshot files
WRITE_RESULT INTERVAL=500 NAME=output/result/RES
# WRITE_SNAPSHOT NAME=output/snapshot/up INTERVAL=10*$(MY_INTERVAL) VARS u p CT 
# WRITE_DATA NAME=output/vtk/up FORMAT=VTK \ 
#         GEOM=IN_BOX -1.57 1.57 -1 1 -1.57 1.57\
#         INTERVAL=10*$(MY_INTERVAL) VARS u T 



